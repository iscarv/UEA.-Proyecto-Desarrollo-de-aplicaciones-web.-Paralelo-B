{% extends "base.html" %}
{% block title %}Inicio{% endblock %}

{% block content %}
<h1 class="mb-4">Bienvenido a la aplicación</h1>

{% if current_user.is_authenticated %}
  <p>Hola, {{ current_user.nombre }} 🎉</p>

  <h2 class="mb-4">📚 Inventario de libros</h2>

  <!-- Botón para añadir un nuevo libro al inventario -->
  <a class="btn btn-primary mb-3" href="{{ url_for('add') }}">➕ Añadir libro</a>

  <!-- Formulario de búsqueda por título -->
  <form class="d-flex mb-3" method="get" action="{{ url_for('search') }}">
    <input class="form-control me-2" type="search" name="q" placeholder="Buscar por título" aria-label="Buscar">
    <button class="btn btn-outline-success" type="submit">🔍 Buscar</button>
  </form>

  <!-- Tabla que muestra el inventario de libros -->
  <table class="table table-bordered table-striped">
    <thead>
      <tr>
        <th>ID</th>
        <th>Título</th>
        <th>Autor</th>
        <th>Categoría</th>
        <th>Cantidad</th>
        <th>Precio</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      {% if productos %}
        {% for p in productos %}
        <tr>
          <td>{{ p.id }}</td>
          <td>{{ p.titulo }}</td>
          <td>{{ p.autor }}</td>
          <td>{{ p.categoria }}</td>
          <td>{{ p.cantidad }}</td>
          <td>${{ "%.2f"|format(p.precio) }}</td>
          <td>
            <a href="{{ url_for('update', id_=p.id) }}" class="btn btn-sm btn-warning">✏️ Editar</a>
            <a href="{{ url_for('delete', id_=p.id) }}" class="btn btn-sm btn-danger">🗑️ Eliminar</a>
          </td>
        </tr>
        {% endfor %}
      {% else %}
        <tr>
          <td colspan="7" class="text-center">No se encontraron libros.</td>
        </tr>
      {% endif %}
    </tbody>
  </table>

{% else %}
  <p>Por favor inicia sesión o regístrate para acceder al inventario y más opciones.</p>
{% endif %}

{% endblock %}




